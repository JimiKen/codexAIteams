# Codex AI Teams 功能清单

## A. 当前功能范围（MVP）

1. 团队页：团队成员横向标识（仅展示成员）【已实现】
2. 团队页：对话输入与发送（无主任务入口）【已实现】
3. 团队页：Agent 列表（Agent/角色/状态/执行日志列）【已实现】
4. 配置页：Agent 参数配置（temperature/role_prompt/codex_params/session_id/extra_params）【已实现】
5. 配置页：Bridge 与 Telegram 配置（bridge_url/timeout/retry/token/chat_id）【已实现】
6. 日志页：日志列表（时间/agent/状态/级别/消息）【已实现】
7. 日志页：error/normal 筛选【已实现】
8. 日志页：CSV 导出【已实现】
9. 文件页：工作路径选择【已实现】
10. 文件页：资源管理器式目录树浏览【已实现】
11. 终端页：命令执行与输出回显【已实现-基础版】
12. 团队页：团队对话（可发给全部成员或单独成员）【已实现-基础版】
13. 团队成员中文标识展示（项目经理/前端工程师/后端工程师/测试工程师）【已实现】
14. 团队对话输入框可编辑（多行输入）【已实现】
15. 团队对话快捷键发送（Enter 发送，Shift+Enter 换行）【已实现】
16. Agent 对话回复可读化（按提问返回内容，不再仅“已处理任务”）【已实现-基础版】
17. 每个 Agent 独立外部 Codex CLI 实例运行（独立 PID）【已实现】
18. 每个 Agent 独立 session_id 与上下文文件持久化【已实现】
19. GUI 并发调度独立 Codex CLI 消息并回传结果【已实现】
20. 对话执行流式回显（CLI事件逐行输出，类似 CMD）【已实现-基础版】
21. 超时自动重试（首次超时后自动重试一次并延长超时）【已实现】

## B. 明确不做（当前版本）

1. 汇总结果面板
2. 独立执行日志大面板（团队页仅保留 Agent 行内执行日志列）

## C. 规则功能（硬条件）

1. 每轮沟通后同步更新：
   - `需求文档.md`
   - `功能清单.md`
2. 每次更新必须标记变更类型：新增/修改/删除
3. 文档编码必须保持 UTF-8

## D. 后续增强功能（Next）

1. 终端页改造为实时流式（stdout/stderr 增量刷新）
2. 日志页增加按 Agent、时间范围筛选
3. 文件页增加文件预览与搜索
4. 配置页增加字段校验与模板化导入导出

## E. 本轮变更（v1.14）

新增：

1. 配置页完整参数化：Agent 全参数（含 role_prompt）+ Telegram token/chat id。
2. 日志页 CSV 导出能力。
3. 文件页资源管理器视图与工作路径切换。
4. 终端页命令执行与消息接入。
5. 团队页新增对话区：支持群发与单发到指定成员。
6. 团队成员横向标识新增中文角色展示。
7. 团队对话输入框改为多行可编辑输入。
8. 新增 Enter 快捷发送（Shift+Enter 保留换行）。
9. Agent 回复改为可读回答，并在回复头展示中文角色。
10. 新增独立运行时管理：每个 Agent 独立进程与独立会话文件。
11. 运行时升级为真实外部 Codex CLI 调用（exec/exec resume）。
12. 修复续聊参数兼容：移除 `exec resume` 不支持的 `-C` 参数。
13. 新增流式回显：CLI JSON 事件逐条推送到 Agent 日志列。
14. 新增超时恢复机制：超时后自动重试一次并延长超时阈值。

修改：

1. 团队页改为“对话区 + Agent 列表 + 行内执行日志”结构。
2. 团队成员展示改为横向标识。
3. 配置页 Prompt 编辑方式调整为“表格列内编辑”。
4. Agent 列角色显示调整为“英文角色 / 中文角色”。
5. 团队对话执行链由单进程占位调用改为独立进程并发调度。
6. Agent 回复风格调整为“直接答案”，去掉“我是...”前缀。
7. 独立进程定义从“本地占位Worker”升级为“外部 Codex CLI 子进程”。
8. 续聊调用从失败状态恢复为可稳定连续对话。
9. 路径提问约束增强：提示词要求输出完整路径，避免空值。
10. 并发重任务下超时容错从“直接失败”升级为“自动重试一次”。

删除：

1. 删除汇总结果区域。
2. 删除独立执行日志大面板。

## F. 本轮变更（v1.15）

新增：

1. 新增 `docs/roles` 角色文档目录。
2. 新增 `docs/roles/项目经理文档.md`。
3. 新增 `docs/roles/前端工程师文档.md`。
4. 新增 `docs/roles/后端工程师文档.md`。
5. 新增 `docs/roles/测试工程师文档.md`。
6. 新增 `docs/roles/README.md` 索引文件。
